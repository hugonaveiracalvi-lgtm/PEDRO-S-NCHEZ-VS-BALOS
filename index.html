<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedro S√°nchez vs √Åbalos</title>
    <link rel="stylesheet" href="style.css">

    <!-- FIREBASE COMPAT SCRIPTS (Global Scope) -->
    <!-- Essential for running locally without a server -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

    <!-- FIREBASE MANAGER (Now a normal script) -->
    <script src="firebase-manager.js"></script>
</head>

<body>
    <!-- DISCLAIMER SCREEN -->
    <div id="disclaimer-screen">
        <div class="disclaimer-content">
            <div class="alert-header">
                <span class="alert-icon">‚ö†Ô∏è</span>
                <span class="alert-text">ALERT</span>
                <span class="alert-icon">‚ö†Ô∏è</span>
            </div>

            <h1>COMUNICADO OFICIAL</h1>


            <div class="disclaimer-body">
                <p>El presente videojuego es una obra de ficci√≥n y s√°tira.<br>
                    Su contenido tiene fines exclusivamente humor√≠sticos.</p>

                <p>No existe afiliaci√≥n pol√≠tica, ideol√≥gica o partidista alguna por parte de su creador.</p>

                <p>Las interpretaciones quedan bajo responsabilidad del jugador.</p>

                <p class="final-warning">Dicho esto‚Ä¶<br>
                    puedes pulsar COMENZAR.</p>

                <div class="disclaimer-signature">BY GALLLUMBO</div>
            </div>

            <button id="disclaimer-start-btn">COMENZAR</button>
        </div>
    </div>

    <!-- VIDEO INTRO WITH CENTERED LOADING BAR -->
    <div id="intro-screen">
        <video autoplay muted loop playsinline id="intro-video">
            <source src="generated-video-c188e085-bb9b-4adb-89e0-a43758dbdf37.mp4" type="video/mp4">
        </video>
        <div class="intro-title-container">
            <div class="title-name name-top">PEDRO S√ÅNCHEZ</div>
            <div class="title-vs">VS</div>
            <div class="title-name name-bottom">√ÅBALOS</div>
        </div>
        <div class="loading-bar-wrapper">
            <div class="loading-bar-container">
                <div class="loading-bar-fill"></div>
            </div>
            <div class="loading-percentage">0%</div>
        </div>
    </div>

    <!-- Top Right Buttons -->
    <div id="cat-button-container">
        <!-- New Guide Button (Left of Pulsame) -->
        <button id="guide-btn" class="top-nav-btn">
            <span class="btn-icon">üìú</span>
            <span>GU√çA</span>
        </button>

        <!-- Existing Cat Button -->
        <a href="http://www.pedrosanchezdimision.com/" target="_blank" class="top-nav-btn">
            <img src="gatito.webp" alt="Gatito Button" title="¬°P√∫lsame!">
            <span>pulsame</span>
        </a>
    </div>

    <!-- Guide Modal -->
    <div id="guideModal" class="guide-modal">
        <div class="guide-modal-content">
            <button class="close-guide-btn" id="closeGuideBtn">√ó</button>
            <div class="guide-text-content">
                <h2>üïπÔ∏è GU√çA OFICIAL</h2>
                <h3>PEDRO S√ÅNCHEZ VS √ÅBALOS</h3>

                <p>Bienvenido, jugador.<br>
                    Espa√±a atraviesa tiempos dif√≠ciles.<br>
                    Y t√∫ est√°s aqu√≠ por una raz√≥n.</p>

                <p>Tu misi√≥n es simple de explicar‚Ä¶<br>
                    pero dif√≠cil de ejecutar:</p>

                <ul class="guide-list">
                    <li>üëâ Correr</li>
                    <li>üëâ Esquivar marrones</li>
                    <li>üëâ No dejar que √Åbalos te alcance</li>
                </ul>

                <p>Aqu√≠ no hay discursos.<br>
                    Aqu√≠ solo cuentan los reflejos.</p>

                <hr class="guide-separator">

                <h3>üéÆ CONTROLES DEL SISTEMA</h3>

                <div class="control-grid">
                    <div class="control-row">
                        <span class="key-badge">‚¨ÜÔ∏è / ESPACIO / CLIC</span>
                        <span>Saltar cuando la situaci√≥n se pone comprometida.</span>
                    </div>
                    <div class="control-row">
                        <span class="key-badge">‚¨áÔ∏è FLECHA ABAJO</span>
                        <span>Agacharse y mirar hacia otro lado.<br><small>Una t√©cnica muy utilizada.</small></span>
                    </div>
                </div>

                <div class="official-note">
                    <strong>Nota oficial:</strong><br>
                    Si dudas, salta.<br>
                    Si no saltas‚Ä¶ puede que te pillen.
                </div>

                <hr class="guide-separator">

                <h3>üß† C√ìMO FUNCIONA TODO ESTO</h3>

                <ul class="guide-list-simple">
                    <li>Pedro corre sin preguntar</li>
                    <li>Los problemas aparecen sin avisar</li>
                    <li>Cada segundo suma</li>
                    <li>Cada error pesa</li>
                </ul>

                <p>Cuanto m√°s avanzas:</p>
                <ul class="guide-list-simple">
                    <li>M√°s r√°pido va todo</li>
                    <li>M√°s presi√≥n hay</li>
                    <li>M√°s cerca est√° √âL</li>
                </ul>

                <hr class="guide-separator">

                <h3>üòà √ÅBALOS ‚Äì ENFRENTAMIENTO FINAL</h3>

                <p>Cuando aparece el temporizador,<br>
                    ya no sirven las explicaciones.</p>

                <p>‚è±Ô∏è Aguanta hasta el final.<br>
                    No te conf√≠es.<br>
                    No mires atr√°s.<br>
                    No falles.</p>

                <p>Porque si te alcanza‚Ä¶</p>

                <h4 class="text-danger">‚ùå DERROTA</h4>

                <p>√Åbalos se r√≠e.<br>
                    Tu puntuaci√≥n queda registrada.<br>
                    Y todo vuelve a empezar.</p>

                <p>Pero siempre hay otra oportunidad.<br>
                    Como siempre.</p>

                <hr class="guide-separator">

                <h3>üèÜ LOGROS INSTITUCIONALES</h3>

                <div class="achievements-list">
                    <p>üéÆ <strong>Primera Partida</strong>: Ya has entrado en el barro.</p>
                    <p>üåä <strong>Explorador Acu√°tico</strong>: Llegaste m√°s lejos de lo previsto.</p>
                    <p>üî• <strong>Enfrentamiento Final</strong>: Lo miraste a los ojos.</p>
                    <p>üèÜ <strong>H√©roe de Espa√±a</strong>: Completaste el juego. Aguantaste hasta el final.</p>
                    <p>üîç <strong>Descubridor Secreto</strong>: Curiosear tiene premio.</p>
                    <p>üëÄ <strong>Pichula Encontrada</strong>: No preguntes. Sigue jugando.</p>
                </div>

                <hr class="guide-separator">

                <h3>üëÄ ADVERTENCIA FINAL</h3>

                <p>Este juego contiene elementos que:</p>
                <ul class="guide-list-simple">
                    <li>No se explican</li>
                    <li>No se anuncian</li>
                    <li>No deber√≠an estar ah√≠</li>
                </ul>

                <p>Pulsa con responsabilidad.</p>

                <hr class="guide-separator">

                <h3>üá™üá∏ MENSAJE FINAL</h3>

                <p class="final-quote">
                    Corre.<br>
                    Salta.<br>
                    Esquiva.<br><br>
                    Mantente en pie cuando todo se acelera.<br>
                    No mires atr√°s cuando el ruido aumenta.<br><br>
                    Espa√±a te necesita.
                </p>
            </div>
        </div>
    </div>

    <!-- Pichula Button -->
    <div id="pichula-container">
        <button id="pichula-btn">
            <img src="pichula_btn.jpg" alt="Pichula">
        </button>
        <span>PICHULA PEDRITO</span>
    </div>

    <!-- Modal para nombre de usuario -->
    <div class="user-modal" id="userModal">
        <div class="user-modal-content">
            <div class="modal-images">
                <img src="sanchez-635x358.webp" alt="Pedro" class="char-img">
                <!-- Placeholder if img missing will use alt or style -->
                <div class="vs-badge">VS</div>
                <img src="W7WBFXIPPJEWXNG5JC76VA7M6I.jpg" alt="√Åbalos" class="char-img">
            </div>
            <h2>¬°HOLA COMPA√ëERO!</h2>
            <p>Para guardar tu progreso y aparecer en el ranking global, inicia sesi√≥n con Google.</p>

            <div id="login-container">
                <button class="google-btn" id="googleLoginBtn">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo">
                    <span>Iniciar sesi√≥n con Google</span>
                </button>
                <div class="divider">O</div>
                <button class="guest-btn" id="guestBtn">Jugar como Invitado</button>
            </div>

            <!-- Hidden legacy input for fallback if needed, but we mostly replace it -->
            <div id="guest-input-container" style="display:none;">
                <input type="text" class="username-input" id="usernameInput" placeholder="Nombre de invitado..."
                    maxlength="20">
                <button class="username-btn" id="usernameBtn">COMENZAR</button>
            </div>
        </div>
    </div>

    <!-- Part√≠culas de fondo -->
    <div class="particles" id="particles"></div>

    <!-- Achievements Panel -->
    <div class="achievements-panel" id="achievementsPanel">
        <div class="achievements-header">üèÜ LOGROS üèÜ</div>
        <div class="achievement-item" id="achievement-1" data-locked="true">
            <div class="achievement-icon">üéÆ</div>
            <div class="achievement-info">
                <div class="achievement-title">Primera Partida</div>
                <div class="achievement-desc">Juega al menos 1 vez</div>
            </div>
        </div>
        <div class="achievement-item" id="achievement-2" data-locked="true">
            <div class="achievement-icon">üåä</div>
            <div class="achievement-info">
                <div class="achievement-title">Explorador Acu√°tico</div>
                <div class="achievement-desc">Llega al modo acu√°tico</div>
            </div>
        </div>
        <div class="achievement-item" id="achievement-3" data-locked="true">
            <div class="achievement-icon">üî•</div>
            <div class="achievement-info">
                <div class="achievement-title">Enfrentamiento Final</div>
                <div class="achievement-desc">Llega al jefe final</div>
            </div>
        </div>
        <div class="achievement-item" id="achievement-4" data-locked="true">
            <div class="achievement-icon">üèÜ</div>
            <div class="achievement-info">
                <div class="achievement-title">H√©roe de Espa√±a</div>
                <div class="achievement-desc">Completa el juego</div>
            </div>
        </div>
        <div class="achievement-item" id="achievement-5" data-locked="true">
            <div class="achievement-icon">üîç</div>
            <div class="achievement-info">
                <div class="achievement-title">Descubridor Secreto</div>
                <div class="achievement-desc">Encuentra el bot√≥n oculto</div>
            </div>
        </div>
        <div class="achievement-item" id="achievement-6" data-locked="true">
            <div class="achievement-icon">üëÄ</div>
            <div class="achievement-info">
                <div class="achievement-title">Pichula Encontrada</div>
                <div class="achievement-desc">Encuentra la sorpresa</div>
            </div>
        </div>
    </div>

    <div class="header">
        <h1>PEDRO S√ÅNCHEZ VS √ÅBALOS</h1>
        <div class="subtitle">AYUDA A PEDRO S√ÅNCHEZ A ESCAPAR DE LA CORRUPCI√ìN</div>
    </div>

    <div class="game-container">
        <canvas id="gameCanvas" width="1400" height="550"></canvas>
        <div class="high-score" id="highScoreDisplay">R√âCORD: <span id="highScore">0</span></div>
        <div class="score-container" id="scoreDisplay">PUNTUACI√ìN: <span id="score">0</span></div>
        <!-- Boss Timer -->
        <div class="boss-timer" id="bossTimer">15.00</div>

        <!-- Overlay para imagen de celebraci√≥n -->
        <div class="celebration-overlay" id="celebrationOverlay">
            <img class="celebration-image" id="celebrationImage" src="sanchez-zoom-interior.jpg"
                alt="Pedro S√°nchez celebrando">
        </div>

        <!-- Pantalla de Game Over -->
        <div class="game-over" id="gameOverScreen">
            <img class="abalos-gif" id="abalosGif" src="abalos-rie.gif" alt="√Åbalos riendo">
            <h2>‚ùå √ÅBALOS TE PILL√ì ‚ùå</h2>
            <p>Puntuaci√≥n: <span id="finalScore">0</span></p>
            <button class="restart-btn" id="restartBtn">JUGAR DE NUEVO</button>
        </div>
    </div>

    <!-- Boss Victory Screen (Minimalist) -->
    <div class="boss-victory-overlay" id="bossVictoryScreen">
        <div class="boss-victory-content">
            <h1 class="victory-title">HAS ESCAPADO DE √ÅBALOS</h1>
            <video class="victory-video" id="victoryVideo" autoplay muted>
                <source src="abalosvid.mp4" type="video/mp4">
            </video>
            <button class="victory-continue-btn" id="victoryContinueBtn">CONTINUAR</button>
        </div>
    </div>

    <!-- Final Message Screen -->
    <div class="final-message-overlay" id="finalMessageScreen">
        <div class="final-message-content">
            <h1>¬°FELICIDADES!</h1>
            <p>HAS COMPLETADO EL JUEGO.</p>
            <p>GRACIAS A TI, ESPA√ëA NO CAER√Å EN MALAS MANOS.</p>
            <p>NOS VEMOS EN LA PR√ìXIMA, COMPA√ëER@.</p>
            <div class="press-space">PRESIONA ESPACIO PARA CONTINUAR</div>
        </div>
    </div>

    <div class="start-instruction" id="startInstruction">
        PRESIONA ESPACIO O HAZ CLIC PARA COMENZAR
    </div>

    <div class="controls">
        <div class="control-item">
            <div class="key">‚Üë</div>
            <div class="key-text">FLECHA ARRIBA<br>SALTAR</div>
        </div>
        <div class="control-item">
            <div class="key">‚ê£</div>
            <div class="key-text">BARRA ESPACIADORA<br>SALTAR</div>
        </div>
        <div class="control-item">
            <div class="key">‚Üì</div>
            <div class="key-text">FLECHA ABAJO<br>AGACHARSE</div>
        </div>
        <div class="control-item">
            <div class="key">üñ±Ô∏è</div>
            <div class="key-text">CLIC PANTALLA<br>SALTAR</div>
        </div>
    </div>

    <!-- Tabla de clasificaci√≥n fija abajo -->
    <div class="leaderboard">
        <h2><span>üèÜ</span> CLASIFICACI√ìN GLOBAL <span>üèÜ</span></h2>
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th>POSICI√ìN</th>
                    <th>JUGADOR</th>
                    <th>PUNTUACI√ìN</th>
                    <th>FECHA</th>
                </tr>
            </thead>
            <tbody id="leaderboardBody">
                <!-- Las filas se generar√°n din√°micamente -->
            </tbody>
        </table>
    </div>



    <!-- Im√°genes precargadas -->
    <div style="display: none;">
        <img id="pedroFaceImg" src="sanchez-635x358.webp">
        <img id="abalosFaceImg" src="W7WBFXIPPJEWXNG5JC76VA7M6I.jpg">
    </div>

    <script src="script.js"></script>
</body>

</html>